# /opt/dgsuc/.env
# ==========================================
# CONFIGURACIÓN PRINCIPAL - PRODUCCIÓN PORTAINER
# Optimizado para Traefik Proxy (SSL automático)
# ==========================================
APP_NAME="Sistema DGSUC"
APP_ENV=production
APP_KEY=base64:GENERAR_CON_php_artisan_key:generate  # ⚠️ REEMPLAZAR con clave real
APP_DEBUG=false
APP_URL=https://dgsuc.uba.ar

# ==========================================
# BASE DE DATOS PRINCIPAL
# ==========================================
DB_CONNECTION=pgsql
DB_HOST=postgres
DB_PORT=5432
DB_DATABASE=dgsuc_app
DB_USERNAME=dgsuc_user
DB_PASSWORD=TU_PASSWORD_SUPER_SEGURO_AQUI  # ⚠️ REEMPLAZAR con password real
DB_SCHEMA=suc_app
DB_CHARSET=UTF8

# ==========================================
# BASE DE DATOS EXTERNA (MAPUCHE via SSH)
# ==========================================
DB2_CONNECTION=pgsql
DB2_HOST=127.0.0.1
DB2_PORT=5433
DB2_DATABASE=mapuche_prod
DB2_USERNAME=dgsuc_readonly
DB2_PASSWORD=PASSWORD_READONLY_MAPUCHE
DB2_CHARSET=SQL_ASCII
DB2_SCHEMA=mapuche,suc,public

# ==========================================
# REDIS CACHE
# ==========================================
REDIS_HOST=redis
REDIS_PASSWORD=REDIS_PASSWORD_SUPER_SEGURO  # ⚠️ REEMPLAZAR con password real
REDIS_PORT=6379
REDIS_CLIENT=phpredis
REDIS_PREFIX=dgsuc_

# ==========================================
# CACHE Y SESIONES
# ==========================================
CACHE_DRIVER=redis
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=true
SESSION_COOKIE=dgsuc_session
SESSION_DOMAIN=.uba.ar

# ==========================================
# COLA DE TRABAJOS
# ==========================================
QUEUE_CONNECTION=redis
QUEUE_RETRY_AFTER=3600
QUEUE_BLOCK_FOR=null

# ==========================================
# CONFIGURACIÓN DE CORREO
# ==========================================
MAIL_MAILER=smtp
MAIL_HOST=smtp.uba.ar
MAIL_PORT=587
MAIL_USERNAME=dgsuc@uba.ar
MAIL_PASSWORD=PASSWORD_CORREO_AQUI
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=dgsuc@uba.ar
MAIL_FROM_NAME="Sistema DGSUC"

# ==========================================
# MICROSOFT AZURE AD (SSO UBA)
# ==========================================
MICROSOFT_CLIENT_ID=TU_AZURE_CLIENT_ID
MICROSOFT_CLIENT_SECRET=TU_AZURE_CLIENT_SECRET
MICROSOFT_REDIRECT_URI=https://dgsuc.uba.ar/auth/microsoft/callback
MICROSOFT_TENANT_ID=TU_TENANT_ID

# ==========================================
# SSH TUNNEL CONFIGURATION
# ==========================================
SSH_HOSTUSER=tunnel_user
SSH_HOSTNAME=mapuche.uba.ar
SSH_HOSTPORT=22
SSH_TUNNEL_HOST=127.0.0.1
SSH_TUNNEL_LOCAL=5433
SSH_TUNNEL_REMOTE=5432

# ==========================================
# WORKERS CONFIGURATION
# ==========================================
WORKER_PROCESSES=6
WORKER_MEMORY=4096
WORKER_TIMEOUT=3600

# ==========================================
# SICOSS PROCESSING
# ==========================================
SICOSS_MEMORY_LIMIT=8192
SICOSS_TIME_LIMIT=3600
SICOSS_BATCH_SIZE=10000

# ==========================================
# MONITORING
# ==========================================
GRAFANA_PASSWORD=PASSWORD_GRAFANA_ADMIN
GRAFANA_ROOT_URL=http://localhost:3000

# ==========================================
# NGINX (Traefik maneja HTTPS automáticamente)
# ==========================================
# NGINX_HOST=dgsuc.uba.ar  # No necesario con Traefik

# ==========================================
# SEGURIDAD (Traefik maneja SSL/TLS)
# ==========================================
SECURE_COOKIES=true
# FORCE_HTTPS=true  # Traefik maneja redirección HTTPS

# ==========================================
# LOGGING
# ==========================================
LOG_CHANNEL=stack
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error